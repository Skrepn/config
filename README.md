# Конфигурационное управление 
## Домашнее задание
## Скрипичников Никита ИКБО-23-24 
## Вариант 28 
## Требования: 
Разработать инструмент командной строки для учебного конфигурационного 
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из 
входного формата в выходной. Синтаксические ошибки выявляются с выдачей 
сообщений. 
Входной текст на учебном конфигурационном языке принимается из стандартного ввода. Выходной текст на языке xml попадает в стандартный вывод.

Однострочные комментарии:  
* Это однострочный комментарий

Числа:  
[+-]?([1-9][0-9]*|0)

Массивы:  
<< значение, значение, значение, ... >>

Словари:  
[  
имя => значение,  
имя => значение,  
имя => значение,  
...
]

Имена:  
[A-Z]+

Значения:  
• Числа  
• Массивы  
• Словари

Объявление константы на этапе трансляции:  
имя := значение

Вычисление константы на этапе трансляции:  
#(имя)

Результатом вычисления константного выражения является значение. 
Все конструкции учебного конфигурационного языка (с учетом их 
возможной вложенности) должны быть покрыты тестами. Необходимо показать 3 
примера описания конфигураций из разных предметных областей.

## 1. Общее описание. 
Данный проект представляет собой инструмент командной строки для преобразования текста из учебного конфигурационного языка в формат XML.

Инструмент читает данные из стандартного ввода, выполняет синтаксический разбор с использованием библиотеки `ply` и выводит результат в стандартный вывод в формате XML.

main.py: Основной исполняемый файл.

tests.py: Модуль для автоматического тестирования. Реализует покрытие кода тестами, проверяя работу программы на различных входных данных (числа, массивы, словари, вложенные структуры) и корректность обработки ошибок. Тесты запускают main.py как отдельный процесс, имитируя ввод пользователя.

## 2. Описание всех функций и настроек. 

### main.py
*   **t_COMMENT(t)**: Функция для обработки и игнорирования комментариев.
*   **t_CONST_REF(t)**: Обрабатывает конструкции вида `#(NAME)`.
*   **t_NAME(t)**: Определяет валидные имена переменных (только заглавные латинские буквы).
*   **t_NUMBER(t)**: Распознает целые числа (включая отрицательные) и преобразует их в тип `int`.
*   **t_newline(t)**: Отслеживает номера строк для корректного отображения ошибок.
*   **t_error(t)**: Обрабатывает недопустимые символы, выводя сообщение об ошибке.
*   **p_program(p), p_statements(p)**: Определяют структуру программы как последовательность выражений.
*   **p_statement(p)**: Обрабатывает присваивание вида `ИМЯ := ЗНАЧЕНИЕ`.
*   **p_value_const(p)**: Реализует логику подстановки значений констант.
*   **p_array(p), p_elements(p)**: Рекурсивно разбирают массивы `<< ... >>`.
*   **p_dictionary(p), p_pairs(p), p_pair(p)**: Рекурсивно разбирают словари `[ ... ]`.
*   **p_error(p)**: Обработка синтаксических ошибок (например, пропущенные скобки).
*   **build_xml(doc, parent, data)**: Рекурсивно преобразует структуры данных Python в XML-дерево.

### tests.py
*   **send_data(text)**: Вспомогательная функция. Запускает `main.py` в отдельном процессе, передает входные данные и возвращает результат.
*   **test_numbers()**: Проверяет корректность парсинга положительных и отрицательных чисел.
*   **test_arrays()**: Проверяет преобразование массивов в список тегов `<item>`.
*   **test_dictionaries()**: Проверяет преобразование словарей в XML-теги по ключам.
*   **test_constants()**: Проверяет объявление констант и их использование через `#(NAME)`.
*   **test_nesting()**: Проверяет сложные вложенные структуры (массивы внутри словарей и наоборот).
*   **test_comments()**: Убеждается, что комментарии игнорируются и не попадают в выходной файл.

## 3. Описание команд для сборки проекта и запуска тестов. 
### Установка библиотеки 
pip install ply
### Примеры
* test1 (Физика).

### Запуск через командную строку:
py main.py < test1.txt


* test2 (Информатика). 

### Запуск через командную строку:
py main.py < test2.txt


* test3 (Химия).

### Запуск через командную строку:
py main.py < test3.txt

### Тесты

### Запуск тестов через командную строку:

py tests.py

## 4. Примеры использования.
<img width="265" height="172" alt="image" src="https://github.com/user-attachments/assets/c77b9a41-f10e-42c3-84c5-57503ad42a86" />

<img width="875" height="135" alt="image" src="https://github.com/user-attachments/assets/be1dc3d7-8a9a-4701-bf0e-33d62ebe2b02" />




